<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>India Weather App by State & City</title>
  <style>
    body { font-family: Arial, sans-serif;
      background: linear-gradient(to right, #74ebd5, #9face6);
      display: flex; align-items: center; justify-content: center;
      height: 100vh; margin: 0;
    }
    .weather-container { background: white; padding: 30px;
      border-radius: 15px; box-shadow: 0 0 15px rgba(0,0,0,0.1);
      text-align: center; max-width: 400px; width: 100%;
    }
    select, button {
      padding: 10px; width: 80%; font-size: 16px;
      margin: 10px 0; border-radius: 8px; border: 1px solid #ccc;
    }
    button { background-color: #2196F3; color: white; border: none; cursor: pointer; }
    button:hover { background-color: #1976D2; }
    .result { margin-top: 20px; font-size: 18px; }
    .temp { font-size: 32px; font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="weather-container">
    <h2>üå§Ô∏è Weather in India</h2>
    <select id="state" onchange="updateCities()">
      <option value="">-- Select State --</option>
      <!-- States options populated by script -->
    </select>
    <select id="city"><option value="">-- Select City --</option></select>
    <button onclick="getWeather()">Get Weather</button>
    <div class="result" id="weatherResult"></div>
  </div>

  <script>
    const apiKey = "9a3b44b03a5967059fbfc39bad08c644"; // Replace with your OpenWeatherMap API key

    const stateCityMap = {
      "Andhra Pradesh": ["Visakhapatnam","Vijayawada","Guntur","Tirupati"],
      "Arunachal Pradesh": ["Itanagar","Tawang","Pasighat","Ziro"],
      "Assam": ["Guwahati","Dibrugarh","Silchar","Tezpur"],
      "Bihar": ["Patna","Gaya","Bhagalpur","Muzaffarpur"],
      "Chhattisgarh": ["Raipur","Bhilai","Bilaspur","Korba"],
      "Goa": ["Panaji","Vasco da Gama","Margao","Mapusa"],
      "Gujarat": ["Ahmedabad","Surat","Rajkot","Vadodara"],
      "Haryana": ["Faridabad","Gurgaon","Ambala","Panipat"],
      "Himachal Pradesh": ["Shimla","Dharamshala","Mandi","Solan"],
      "Jharkhand": ["Ranchi","Jamshedpur","Bokaro","Dhanbad"],
      "Karnataka": ["Bengaluru","Mysuru","Mangalore","Hubli"],
      "Kerala": ["Thiruvananthapuram","Kochi","Kozhikode","Thrissur"],
      "Madhya Pradesh": ["Bhopal","Indore","Gwalior","Jabalpur"],
      "Maharashtra": ["Mumbai","Pune","Nagpur","Nashik"],
      "Manipur": ["Imphal","Bishnupur"],
      "Meghalaya": ["Shillong","Tura"],
      "Mizoram": ["Aizawl","Lunglei"],
      "Nagaland": ["Kohima","Mokokchung"],
      "Odisha": ["Bhubaneswar","Cuttack","Rourkela","Puri"],
      "Punjab": ["Amritsar","Ludhiana","Jalandhar","Patiala"],
      "Rajasthan": ["Jaipur","Jodhpur","Udaipur","Bikaner"],
      "Sikkim": ["Gangtok","Namchi"],
      "Tamil Nadu": ["Chennai","Coimbatore","Madurai","Tiruchirappalli"],
      "Telangana": ["Hyderabad","Warangal","Nizamabad","Karimnagar"],
      "Tripura": ["Agartala","Udaipur"],
      "Uttar Pradesh": ["Lucknow","Kanpur","Varanasi","Agra"],
      "Uttarakhand": ["Dehradun","Haridwar","Rishikesh","Roorkee"],
      "West Bengal": ["Kolkata","Howrah","Asansol","Darjeeling"]
    };

    function updateCities() {
      const state = document.getElementById("state").value;
      const citySelect = document.getElementById("city");
      citySelect.innerHTML = '<option value="">-- Select City --</option>';
      if (stateCityMap[state]) {
        stateCityMap[state].forEach(c => {
          const o = document.createElement("option");
          o.value = c;
          o.textContent = c;
          citySelect.appendChild(o);
        });
      }
    }

    async function getWeather() {
      const city = document.getElementById("city").value;
      const result = document.getElementById("weatherResult");
      if (!city) {
        result.innerHTML = "Please select a city.";
        return;
      }
      try {
        const resp = await fetch(
          `https://api.openweathermap.org/data/2.5/weather?q=${city},IN&appid=${apiKey}&units=metric`
        );
        const d = await resp.json();
        if (d.cod !== 200) {
          result.innerHTML = "City weather not found!";
        } else {
          const iconUrl = `http://openweathermap.org/img/wn/${d.weather[0].icon}@2x.png`;
          result.innerHTML = `
            <p><strong>${d.name}, ${d.sys.country}</strong></p>
            <img src="${iconUrl}" alt="${d.weather[0].description}">
            <div class="temp">${d.main.temp}¬∞C</div>
            <p>${d.weather[0].description}</p>`;
        }
      } catch (err) {
        result.innerHTML = "Error fetching weather data.";
        console.error(err);
      }
    }

    // Populate states dropdown
    (()=>{
      const s = document.getElementById("state");
      Object.keys(stateCityMap).forEach(st=>{
        const o=document.createElement("option");
        o.value=st; o.textContent=st;
        s.appendChild(o);
      });
    })();
  </script>
</body>
</html>
